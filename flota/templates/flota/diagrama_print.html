{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Diagrama | {{ day|date:"d/m/Y" }} | La Termal ERP</title>

  <style>
    body { font-family: Arial, Helvetica, sans-serif; color:#111827; margin: 20px; }
    h1 { font-size: 18px; margin: 0; }
    .meta { font-size: 12px; margin-top: 4px; color: #374151; }
    .section { margin-top: 14px; }
    .section-title { font-weight: 700; background:#f3f4f6; padding: 6px 8px; border: 1px solid #e5e7eb; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border: 1px solid #e5e7eb; padding: 6px 8px; font-size: 12px; }
    th { background:#f9fafb; text-align: left; }
    .muted { color:#6b7280; }
    .footer { margin-top: 16px; font-size: 11px; color:#374151; }
    @media print {
      body { margin: 10mm; }
      .no-print { display:none; }
    }
  </style>
</head>
<body>

  <div class="no-print" style="margin-bottom:10px;">
    <button onclick="window.print()">Imprimir</button>
  </div>

  <div style="display:flex; justify-content:space-between; align-items:flex-end;">
    <div>
      <h1>DIAGRAMA DE SERVICIOS LA TERMAL</h1>
      <div class="meta">Generado desde el sistema · {{ day|date:"d/m/Y" }}</div>
    </div>
    <div class="meta">{{ day|date:"d/m/Y" }}</div>
  </div>

  {% for seccion, items in grupos.items %}
    <div class="section">
      <div class="section-title">{{ seccion }}</div>
      <table>
        <thead>
          <tr>
            <th style="width:140px;">Salida</th>
            <th style="width:160px;">Chofer</th>
            <th style="width:120px;">Regreso</th>
            <th style="width:90px;">Coche</th>
            <th>Recorrido</th>
          </tr>
        </thead>
        <tbody>
          {% for s in items %}
            <tr>
              <td>
                <div><strong>{{ s.salida_programada|date:"H:i" }}</strong></div>
                <div class="muted">{{ s.salida_label|default:"" }}</div>
              </td>
              <td>{{ s.chofer|default:"" }}</td>
              <td>{{ s.regreso|default:"" }}</td>
              <td>{{ s.colectivo.interno }}</td>
              <td>{{ s.recorrido|default:"" }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endfor %}

  <div class="footer">
    ALCOHOL CERO AL VOLANTE · LEY N° 27.714
  </div>

</body>
</html>
