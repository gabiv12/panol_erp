{% extends "base.html" %}
{% load static %}

{% block title %}Iniciar sesión | La Termal ERP{% endblock %}
{% block page_title %}Iniciar sesión{% endblock %}
{% block page_subtitle %}Acceso al sistema{% endblock %}

{% block content %}
<div class="min-h-[calc(100dvh-140px)] flex items-center justify-center py-10 px-4">
  <div class="w-full max-w-md">
    <div class="ti-card p-6">

      <div class="mb-5 text-center">
        <div class="flex justify-center mb-2">
          <!-- Logo: tamaño moderado fijo (no depende de clases Tailwind) -->
          <div class="relative mx-auto" style="width:80px; height:80px;">
            <img
              src="{% static 'img/fondo_blanco.svg' %}"
              alt="La Termal ERP"
              class="block rounded-full bg-white p-1 dark:hidden"
              style="width:100%; height:100%; object-fit:contain;"
            />
            <img
              src="{% static 'img/fondo_oscuro.svg' %}"
              alt="La Termal ERP"
              class="block rounded-full bg-transparent p-0 hidden dark:block"
              style="width:100%; height:100%; object-fit:contain;"
            />
          </div>
        </div>

        <h1 class="text-2xl font-semibold">Iniciar sesión</h1>
        <p class="mt-1 text-sm ti-subtitle">Accedé con tu usuario y contraseña.</p>
      </div>

      {% if form.errors %}
        <div class="mb-4 ti-badge-critical rounded-2xl px-4 py-3 text-sm">
          Usuario o contraseña inválidos.
        </div>
      {% endif %}

      <form method="post" class="space-y-4" novalidate>
        {% csrf_token %}

        <div>
          <label for="id_username" class="ti-label mb-1">Usuario</label>
          <input id="id_username" name="username" class="ti-input" autocomplete="username" required />
        </div>

        <div>
          <div class="flex items-center justify-between mb-1">
            <label for="id_password" class="ti-label">Contraseña</label>
            <button
              type="button"
              class="text-xs font-semibold text-slate-700 hover:text-slate-900 dark:text-slate-300 dark:hover:text-slate-100"
              data-toggle-password
              data-target="#id_password"
            >
              Mostrar
            </button>
          </div>
          <input id="id_password" name="password" type="password" class="ti-input" autocomplete="current-password" required />
        </div>

        <input type="hidden" name="next" value="{{ next }}" />

        <button class="ti-btn-primary w-full py-2.5" type="submit">Entrar</button>
      </form>
    </div>

    <p class="mt-4 text-xs ti-subtitle text-center">
      Acceso restringido. Si no tenés una cuenta, contactá al administrador del sistema.
    </p>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'core/js/login.js' %}" defer></script>
{% endblock %}